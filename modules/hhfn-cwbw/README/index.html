<h1>commonnexus</h1>
<p><a href="https://github.com/dlce-eva/commonnexus/actions?query=workflow%3Atests"><img src="https://github.com/dlce-eva/commonnexus/workflows/tests/badge.svg" alt="Build Status"></a>
<a href="https://commonnexus.readthedocs.io/en/latest/?badge=latest"><img src="https://readthedocs.org/projects/commonnexus/badge/?version=latest" alt="Documentation Status"></a>
<a href="https://pypi.org/project/commonnexus"><img src="https://badge.fury.io/py/commonnexus.svg" alt="PyPI"></a></p>
<p>This package provides functionality to read and write the NEXUS file format as specified in</p>
<blockquote>
<p>Maddison, Swofford, and Maddison (1997). &quot;NEXUS: An extensible file format for systematic information&quot;. Systematic Biology. 46 (4): 590â€“621. <a href="https://doi.org/10.1093/sysbio/46.4.590">doi:10.1093/sysbio/46.4.590</a></p>
</blockquote>
<p>Rather than trying to rip out relevant portions of a NEXUS file as quickly as possible, the implementation
in <code>commonnexus</code> tries to do &quot;the right thing&quot; according to the specification, i.e. parse a file token by
token. Thus, we sacrifice speed for correctness and the ability to support weird edge cases like</p>
<blockquote>
<p>Comments do not break tokens. Thus, <code>AssuMP[comment]TiONS</code> is processed as <code>ASSUMPTIONS</code>.</p>
</blockquote>
<h2>Install</h2>
<p>Install <code>commonnexus</code> from <a href="https://pypi.org/project/commonnexus">PyPI</a>:</p>
<pre><code class="language-shell">pip install commonnexus
</code></pre>
<h2>Overview</h2>
<p><code>commonnexus</code> provides a <a href="#python-api">Python API</a> as well as a <a href="#command-line-usage">shell command</a>
to manipulate (the data in) NEXUS files.</p>
<p>In particular, it allows reading NEXUS</p>
<pre><code class="language-python">&gt;&gt;&gt; from commonnexus import Nexus
&gt;&gt;&gt; nex = Nexus.from_file('docs/characters.nex')
&gt;&gt;&gt; nex.CHARACTERS.get_matrix()['t1'].values()
odict_values(['1', '0', '0', '1', '0', '1', '0', '0', '0', '0'])
</code></pre>
<p>and writing NEXUS</p>
<pre><code class="language-python">&gt;&gt;&gt; from commonnexus import Nexus
&gt;&gt;&gt; from commonnexus.blocks import Data
&gt;&gt;&gt; nex = Nexus.from_file('docs/characters.nex')
&gt;&gt;&gt; print(Nexus.from_blocks(Data.from_data(nex.CHARACTERS.get_matrix())))
#NEXUS
BEGIN DATA;
	DIMENSIONS NCHAR=10;
	FORMAT DATATYPE=STANDARD MISSING=? GAP=- SYMBOLS=&quot;01&quot;;
	MATRIX 
    t1 1001010000
    t2 0101000100
    t3 0011101010
    t4 0001100001
    t5 0001100001;
END;
</code></pre>
<h2>Command line usage</h2>
<p>Installing the <code>commonnexus</code> package will also install a command line interface <code>commonnexus</code>, which provides several
sub-commands to manipulate NEXUS files.</p>
<p>Run <code>commonnexus -h</code> to get an overview of available sub-commands or find detailed documentation
with examples <a href="https://commonnexus.readthedocs.io/en/latest/cli.html">on ReadTheDocs</a>.</p>
<h2>Python API</h2>
<p>The Python API tries to convert NEXUS constructs to appropriate Python objects, e.g.</p>
<ul>
<li>NEXUS content is a <code>list</code> of <code>Command</code> objects,</li>
<li>missing states in a CHARACTERS MATRIX are conveyed as <code>None</code> values, etc.</li>
</ul>
<p>This allows for dealing with NEXUS data in a way that is abstracted from the NEXUS formatting
conventions</p>
<p>For a detailed documentation of the Python API, refer to the
<a href="https://commonnexus.readthedocs.io/en/latest/index.html">docs on ReadTheDocs</a>.</p>
<h2>See also</h2>
<ul>
<li>https://doi.org/10.1093/sysbio/46.4.590</li>
<li>https://github.com/dlce-eva/python-nexus</li>
<li>http://wiki.christophchamp.com/index.php?title=NEXUS_file_format</li>
</ul>
